<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">

        <title>Running Key</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="functions.js"></script>

        <link rel="stylesheet" href="style.css">

    </head>
    <body>
        <div class="input-div">
            <h1>Running Key Cryptanalysis</h1>
            <h3>A tool that may serve as a visual aid to cryptanalyze vigenere autokey extended by plaintext and running key ciphers.</h3>
            <hr>
            <br>
            <h2>Ciphertext:</h2>
            <textarea name="ciphertext" id="ciphertext" class="ciphertext-input" cols="30" rows="10"></textarea>

            <h2>Crib:</h2>
            <textarea name="crib" id="crib" class="crib-input" cols="20" rows="1"></textarea>
            <br><br>
            <button id='cryptanalyze'>Begin Cryptanalysis</button>
        </div>




        <script>

            // follow this approach. get rid of document.load or whatever
            // I want everything to fire ONLY after the cryptanalze button has been clicked...

            function foo() {
                console.log("FOO");
            }

            function getCiphertext() {
                var ciphertext = $('#ciphertext').val();
                ciphertext = ciphertext.replace(/\s/g, '');
                var ciphertext = ciphertext.split('');
                ciphertext = to_uppercase(ciphertext);

                return ciphertext;
            }

            function getPlaintext(ciphertext) {
                var crib = $('#crib').val();
                crib = crib.replace(/\s/g, '');
                var crib = crib.split('');
                var plaintext = create_plaintext(ciphertext, crib);

                return plaintext;
            }

            function getKey(ciphertext) {
                var key = create_key(ciphertext);

                return key;
            }

            function init() {
                var ciphertext = getCiphertext();
                var plaintext = getPlaintext(ciphertext);
                var key = getKey(ciphertext);

                console.log("Ciphertext: " + ciphertext);
                console.log("Plaintext: " + plaintext)
                console.log("Key: " + key);
            }

            var btn = document.getElementById("cryptanalyze")
            btn.addEventListener("click", init);

            // var cryptanalyzeBtn = document.getElementById("cryptanalyze");
            // if (cryptanalyzeBtn) {
            //     console.log("Hello World!");
            //     cryptanalyzeBtn.addEventListener("click", init())
            // }
    
        </script>

    </body>

</html>